---
name: kubernetes-master

packages:
- common
- kubernetes

templates:
  config/env.sh.erb: config/env.sh
  config/token-auth.csv.erb: config/token-auth.csv
  config/basic-auth.csv.erb: config/basic-auth.csv
  certs/ca.pem.erb: certs/ca.pem
  certs/kubernetes.pem.erb: certs/kubernetes.pem
  certs/kubernetes-key.pem.erb: certs/kubernetes-key.pem
  apiserver_ctl.erb: bin/apiserver_ctl
  controller-manager_ctl.erb: bin/controller-manager_ctl
  scheduler_ctl.erb: bin/scheduler_ctl

properties:
  apiserver.hosts:
    description: List of master hosts

  apiserver.basic-auth:
    description: List of basic auth credentials
    default: []

  apiserver.token-auth:
    description: List of authentication tokens
    default: []

  certs.ca:
    description: Kubernetes Certificate Authority certificate

  certs.kubernetes:
    description: Kubernetes TLS certificate

  certs.kubernetes-key:
    description: Kubernetes TLS private key

  cloud-provider:
    description: K8s cloud provider
    default: ""

  cloud-credentials.master:
    description: K8s cloud provider master credentials
    default: {}
